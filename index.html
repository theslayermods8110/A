<!DOCTYPE html><html><head><meta charset="utf-8"><title>APK Deep Scanner</title><style>
body{font-family:sans-serif;background:#eef;padding:20px}
input,button{padding:8px;margin:5px;font-size:16px}
#result{white-space:pre-wrap;background:#fff;padding:10px;border:1px solid #ccc;max-height:500px;overflow:auto}
hr{border:0;border-top:1px solid #aaa;margin:10px 0}
span.url{color:blue}
span.key{color:red;font-weight:bold}
span.b64{color:green}
</style></head><body>
<h2>Buscador Profundo en APK (100 l√≠neas)</h2>
<input type="file" id="apk" accept=".apk">
<input type="text" id="query" placeholder="Texto exacto o parcial">
<button onclick="buscar()">Buscar</button>
<div id="result">üîç Carga un APK y escribe algo a buscar...</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script>
let archivos={};
document.getElementById("apk").addEventListener("change", async e=>{
  const file=e.target.files[0];
  if(!file)return;
  const zip=await JSZip.loadAsync(file);
  const exts=['.smali','.xml','.java','.kt','.txt','.json','.cfg','.ini'];
  const promesas=[];
  zip.forEach((path,f)=>{
    if(!f.dir&&exts.some(x=>path.endsWith(x))){
      promesas.push(f.async("string").then(c=>archivos[path]=c));
    }
  });
  await Promise.all(promesas);
  alert("‚úÖ "+Object.keys(archivos).length+" archivos listos para escanear.");
});
function resaltar(str){
  str=str.replace(/(http[s]?:\/\/[^\s"']+)/g,'<span class="url">$1</span>');
  str=str.replace(/(?:(apikey|token|key)[^\s"':=]*[:=]?[ ]?[^\s"']+)/gi,'<span class="key">$&</span>');
  str=str.replace(/\b[a-zA-Z0-9+/=]{16,}\b/g,'<span class="b64">$&</span>');
  return str;
}
function buscar(){
  const q=document.getElementById("query").value.toLowerCase();
  if(!q)return;
  let res='',total=0;
  for(let ruta in archivos){
    const lineas=archivos[ruta].split('\n');
    let bloque='';
    lineas.forEach((l,i)=>{
      if(l.toLowerCase().includes(q)){
        bloque+=`[L√≠nea ${i+1}] ${resaltar(l)}\n`;
        total++;
      }
    });
    if(bloque)res+=`üìÑ ${ruta}\n${bloque}<hr>\n`;
  }
  document.getElementById("result").innerHTML=res||"‚ùå Nada encontrado.";
}
</script>
</body></html>
