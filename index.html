<!DOCTYPE html><html><head><meta charset="utf-8"><title>APK Deep Scanner</title><style>
body{font-family:sans-serif;background:#f4f4f4;padding:20px;margin:0;height:100vh;display:flex;flex-direction:column}
input,button{padding:8px;margin:5px;font-size:16px}
#result{flex:1;overflow:auto;padding:10px;border:2px solid #bbb;background:#fff;margin-top:10px;border-radius:8px;scroll-behavior:smooth}
.box{border:1px solid #ccc;padding:10px;margin:10px 0;white-space:pre-wrap;border-radius:5px}
.url{color:blue}.key{color:red;font-weight:bold}.b64{color:green}.ruta{color:#555;font-size:14px}
/* Scroll personalizado */
#result::-webkit-scrollbar{width:12px}
#result::-webkit-scrollbar-track{background:#eee}
#result::-webkit-scrollbar-thumb{background:#999;border-radius:6px}
#result:hover::-webkit-scrollbar-thumb{background:#666}
</style></head><body>
<h2>Buscador Profundo en APK</h2>
<input type="file" id="apk" accept=".apk">
<input type="text" id="query" placeholder="Buscar texto o patr√≥n">
<button onclick="buscar()">Buscar</button>
<div id="result">üîç Carga un APK y busca algo como <code>verifyCardResult</code></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script>
let archivos={};
apk.onchange=async e=>{
  const zip=await JSZip.loadAsync(e.target.files[0]);
  const prom=[];
  zip.forEach((path,f)=>{
    if(!f.dir)prom.push(f.async("string").then(c=>{
      if(/[\x20-\x7E]/.test(c))archivos[path]=c;
    }).catch(()=>{}));
  });
  await Promise.all(prom);
  alert("‚úÖ "+Object.keys(archivos).length+" archivos cargados.");
};
function resaltar(s){
  s=s.replace(/https?:\/\/\S+/g,'<span class="url">$&</span>');
  s=s.replace(/\b(apikey|token|key)[^:=\s]*[:=]?\s*\S+/gi,'<span class="key">$&</span>');
  s=s.replace(/\b[A-Za-z0-9+/=]{16,}\b/g,'<span class="b64">$&</span>');
  return s;
}
function similar(a,b){
  a=a.toLowerCase();b=b.toLowerCase();
  return a.includes(b)||b.includes(a)||a.replace(/\W/g,'').includes(b.replace(/\W/g,''));
}
function buscar(){
  const q=query.value.trim();if(!q)return;
  let html='',total=0;
  for(let ruta in archivos){
    const txt=archivos[ruta],lines=txt.split('\n');
    let box='';
    lines.forEach((l,i)=>{
      if(similar(l,q))box+=`[${i+1}] ${resaltar(l)}\n`;
    });
    if(box){
      const tipo=/\.(smali|java|kt|xml)$/.test(ruta)?'üß©':'üìÑ';
      html+=`<div class="box"><div class="ruta">${tipo} <b>${ruta}</b></div>${box}</div>`;
      total++;
    }
  }
  result.innerHTML=total?html:"‚ùå Nada encontrado.";
}
</script></body></html>
